import se from"./LocationFound.4df09406.js";import re from"./Logo.5642a43e.js";import ce from"./Radar.4cb696e4.js";import ie from"./CompassCardinalPoints.d1db0ffc.js";import le from"./Compass.e10c9d64.js";import ue from"./Button.5e32531b.js";import de from"./Intersect.ea2583ab.js";import fe from"./Search.7fa4cc80.js";import me from"./Menu.c6d36b26.js";import pe from"./NavigationBar.af567625.js";import _e from"./Menu.fd69f7ee.js";import{bZ as A,b as N,bO as ve,c2 as he,u as s,c3 as ye,r,bM as V,i as W,bk as we,b$ as ge,c0 as be,bE as Ce,bn as ke,l as xe,k as C,h as i,w as b,bF as E,f as I,j as x,bD as Ie,bT as Le,o as g,bj as j,bi as Me,c as F,b_ as B,bH as Se,bI as Re}from"./entry.bf3c8058.js";import{q as Ee}from"./query.a85d850d.js";import{u as Be}from"./map.e70c23bf.js";import{P as Ne,L as P}from"./permission.dd244a3c.js";import{g as Te}from"./index.4db78ffb.js";import{_ as $e}from"./_plugin-vue_export-helper.c27b6911.js";import"./Diamond.8f8a89ce.js";import"./nuxt-link.988dd1b7.js";import"./tw-merge.1166cefb.js";import"./SectionHeading.81e7ab16.js";import"./Cross.4078a997.js";import"./utils.610a6e4e.js";import"./preview.84239780.js";function q(e){return he()?(ye(e),!0):!1}function T(e){return typeof e=="function"?e():s(e)}const Oe=typeof window<"u"&&typeof document<"u",je=Object.prototype.toString,Fe=e=>je.call(e)==="[object Object]",Pe=()=>{};function Ae(e,t=!0){A()?N(e):t?e():ve(e)}function Ve(e){var t;const n=T(e);return(t=n==null?void 0:n.$el)!=null?t:n}const $=Oe?window:void 0;function We(...e){let t,n,l,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,l,o]=e,t=$):[t,n,l,o]=e,!t)return Pe;Array.isArray(n)||(n=[n]),Array.isArray(l)||(l=[l]);const u=[],d=()=>{u.forEach(m=>m()),u.length=0},f=(m,h,p,y)=>(m.addEventListener(h,p,y),()=>m.removeEventListener(h,p,y)),c=V(()=>[Ve(t),T(o)],([m,h])=>{if(d(),!m)return;const p=Fe(h)?{...h}:h;u.push(...n.flatMap(y=>l.map(_=>f(m,y,_,p))))},{immediate:!0,flush:"post"}),v=()=>{c(),d()};return q(v),v}function qe(){const e=r(!1);return A()&&N(()=>{e.value=!0}),e}function De(e){const t=qe();return we(()=>(t.value,!!e()))}function He(e,t={}){const{window:n=$}=t,l=De(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let o;const u=r(!1),d=v=>{u.value=v.matches},f=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",d):o.removeListener(d))},c=W(()=>{l.value&&(f(),o=n.matchMedia(T(e)),"addEventListener"in o?o.addEventListener("change",d):o.addListener(d),u.value=o.matches)});return q(()=>{c(),f(),o=void 0}),u}function ze(e={}){const{window:t=$,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:l=Number.POSITIVE_INFINITY,listenOrientation:o=!0,includeScrollbar:u=!0}=e,d=r(n),f=r(l),c=()=>{t&&(u?(d.value=t.innerWidth,f.value=t.innerHeight):(d.value=t.document.documentElement.clientWidth,f.value=t.document.documentElement.clientHeight))};if(c(),Ae(c),We("resize",c,{passive:!0}),o){const v=He("(orientation: portrait)");V(v,()=>c())}return{width:d,height:f}}const Ue=e=>(Se("data-v-4e31f73f"),e=e(),Re(),e),Qe={key:0},Ye={class:"relative"},Xe={key:0,class:"fixed h-full w-full top-0 left-0 radar-background"},Ze={key:0,class:"fixed left-0 top-0 translate-y-[-180%] container text-center"},Ge=Ue(()=>I("div",{class:"text-md text-yellow-200"}," ¡Vaya! Parece que aquí no hay nada ",-1)),Je=[Ge],Ke={key:0},et={__name:"map",async setup(e){let t,n;const l=ge(),{data:o}=([t,n]=be(()=>Le("locations",()=>Ee("location").find(),{transform:a=>Object.keys(a).map(w=>a[w])})),t=await t,n(),t),u=Be(),d=Ce();ke(),r(null);const f=r(null),c=r(null),v=r(null),m=r(null),h=r(null),p=r(),y=r(!1),_=r(),L=r(),O=r(),D=r(0),M=r(!1),{width:S,height:tt}=ze(),H=a=>new Promise(function(w){setTimeout(w,a)}),z=()=>{const a=m.value.getBoundingClientRect(),w=a.top+a.height/2;a.left+a.width/2;const k=f.value.getBoundingClientRect();f.value.style.top=`${w-k.height/2}px`},U=a=>{M.value||(M.value=!0,u.value.toggleCenitalView({onComplete:()=>{M.value=!1}}))},Q=async()=>{const a=Te.timeline();if(O.value=await Ne.requestLocation(),a.add("start").to(v.value,{x:-S.value},"start").to(h.value,{x:S.value},"start"),O.value){p.value=!0;const[w]=await Promise.all([P.getCurrentLocation(),H(2500)]);_.value=o.value.find(k=>P.nearbyLocation(w,k.place.coordinate)),p.value=!1,L.value=!0,_.value?(c.value.show({expanded:!1}),a.to(m.value,{y:S.value*.5})):a.add("start").to(v.value,{x:0},"start").to(h.value,{x:0},"start"),_.value?setTimeout(()=>{},5e3):setTimeout(()=>{L.value=!1},2e3)}},Y=a=>{c.value.hide(),y.value=!0},X=a=>{c.value.show({expanded:!0,onComplete:()=>{y.value=!1}})};return W(()=>{m.value&&f.value&&z(),y.value?l.value=B.sky[900]:l.value=d.value?B.sky[900]:B.teal[500]}),N(()=>{c.value&&c.value.show({expanded:!0}),u.value&&u.value.show()}),xe(()=>{}),(a,w)=>{const k=se,Z=re,G=ce,J=ie,K=le,R=ue,ee=de,te=fe,ne=me,oe=pe,ae=_e;return g(),C(Ie,null,[i(E,{name:"fade",appear:""},{default:b(()=>[s(_)?(g(),C("div",Qe,[i(k,{location:s(_)},null,8,["location"])])):x("",!0)]),_:1}),I("div",Ye,[i(Z),i(E,{name:"fade",appear:""},{default:b(()=>[s(p)||s(L)&&!s(_)?(g(),C("div",Xe)):x("",!0)]),_:1}),s(p)?(g(),C("div",{key:0,ref_key:"radarRef",ref:f,class:"fixed top-0 left-0 w-screen h-screen"},[i(G)],512)):x("",!0),i(oe,{ref_key:"navRef",ref:c,"inital-state":"hide",centered:""},{default:b(()=>[I("div",{ref_key:"compassButtonRef",ref:v},[i(R,{onClick:U,class:"bg-yellow-200 h-16 w-16 relative flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[i(J,{class:"absolute w-full h-full"}),i(K,{class:"h-8 w-8",style:j({transform:`rotate(${s(D)}deg)`})},null,8,["style"])]),_:1})],512),I("div",{ref_key:"searchButtonRef",ref:m,class:"relative"},[i(E,{name:"fade",appear:""},{default:b(()=>[s(L)&&!s(_)?(g(),C("div",Ze,Je)):x("",!0)]),_:1}),i(R,{onClick:Q,class:Me(["bg-cyan-100 p-11",{"border-[3px] border-yellow-100 p-9":s(p)||s(_)}]),style:j({background:s(p)||s(_)?"linear-gradient(180deg, #001725 0%, rgba(0, 23, 37, 0.00) 100%)":"#EFFDFD"}),format:"circle",shadowed:""},{default:b(()=>[s(p)||s(_)?(g(),F(ee,{key:0,class:"h-12 w-12"})):(g(),F(te,{key:1,class:"h-8 w-8"}))]),_:1},8,["class","style"])],512),I("div",{ref_key:"menuButtonRef",ref:h},[i(R,{onClick:Y,class:"bg-yellow-200 h-16 w-16 flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[i(ne,{class:"h-8 w-8"})]),_:1})],512)]),_:1},512)]),s(y)?(g(),C("div",Ke,[i(ae,{onClose:X})])):x("",!0)],64)}}},Lt=$e(et,[["__scopeId","data-v-4e31f73f"]]);export{Lt as default};
