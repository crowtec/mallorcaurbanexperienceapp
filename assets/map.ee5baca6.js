import ie from"./LocationFound.d5117d79.js";import ce from"./Logo.88f2c20c.js";import le from"./Radar.239257ce.js";import ue from"./CompassCardinalPoints.563103f1.js";import de from"./Compass.fdd76aae.js";import fe from"./Button.841da2f7.js";import me from"./Intersect.82f21505.js";import pe from"./Search.e6f67a3b.js";import _e from"./Menu.fab54109.js";import he from"./NavigationBar.2d706a09.js";import ve from"./Menu.f1da082e.js";import{b$ as F,b as N,bQ as ye,c2 as we,u as r,c3 as ge,r as i,bO as W,i as q,bi as be,bH as Ce,c0 as ke,bD as xe,bn as Ie,l as Le,k,h as c,w as b,bG as E,f as x,j as S,bC as Se,bV as Me,o as g,bk as P,bj as Re,c as V,bJ as Be,bK as Ee,bI as $}from"./entry.fae9dd9f.js";import{q as $e}from"./query.833f3544.js";import{u as Ne}from"./map.6e0e2fa3.js";import{P as Te,L as A}from"./permission.dd244a3c.js";import{g as Oe}from"./index.4db78ffb.js";import{_ as je}from"./_plugin-vue_export-helper.c27b6911.js";import"./Diamond.a33b5be8.js";import"./BlurredCircle.cb612fda.js";import"./tw-merge.1166cefb.js";import"./nuxt-link.49686a0f.js";import"./SectionHeading.f6709665.js";import"./Cross.330d8dc3.js";import"./utils.e24d6a2b.js";import"./preview.382816cf.js";function D(e){return we()?(ge(e),!0):!1}function T(e){return typeof e=="function"?e():r(e)}const Pe=typeof window<"u"&&typeof document<"u",Ve=Object.prototype.toString,Ae=e=>Ve.call(e)==="[object Object]",Fe=()=>{};function We(e,t=!0){F()?N(e):t?e():ye(e)}function qe(e){var t;const o=T(e);return(t=o==null?void 0:o.$el)!=null?t:o}const O=Pe?window:void 0;function De(...e){let t,o,l,n;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,l,n]=e,t=O):[t,o,l,n]=e,!t)return Fe;Array.isArray(o)||(o=[o]),Array.isArray(l)||(l=[l]);const a=[],u=()=>{a.forEach(p=>p()),a.length=0},v=(p,_,y,m)=>(p.addEventListener(_,y,m),()=>p.removeEventListener(_,y,m)),d=W(()=>[qe(t),T(n)],([p,_])=>{if(u(),!p)return;const y=Ae(_)?{..._}:_;a.push(...o.flatMap(m=>l.map(C=>v(p,m,C,y))))},{immediate:!0,flush:"post"}),f=()=>{d(),u()};return D(f),f}function He(){const e=i(!1);return F()&&N(()=>{e.value=!0}),e}function ze(e){const t=He();return be(()=>(t.value,!!e()))}function Qe(e,t={}){const{window:o=O}=t,l=ze(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function");let n;const a=i(!1),u=f=>{a.value=f.matches},v=()=>{n&&("removeEventListener"in n?n.removeEventListener("change",u):n.removeListener(u))},d=q(()=>{l.value&&(v(),n=o.matchMedia(T(e)),"addEventListener"in n?n.addEventListener("change",u):n.addListener(u),a.value=n.matches)});return D(()=>{d(),v(),n=void 0}),a}function Ue(e={}){const{window:t=O,initialWidth:o=Number.POSITIVE_INFINITY,initialHeight:l=Number.POSITIVE_INFINITY,listenOrientation:n=!0,includeScrollbar:a=!0}=e,u=i(o),v=i(l),d=()=>{t&&(a?(u.value=t.innerWidth,v.value=t.innerHeight):(u.value=t.document.documentElement.clientWidth,v.value=t.document.documentElement.clientHeight))};if(d(),We(d),De("resize",d,{passive:!0}),n){const f=Qe("(orientation: portrait)");W(f,()=>d())}return{width:u,height:v}}const H=e=>(Be("data-v-f3d6acd1"),e=e(),Ee(),e),Ye={key:0},Ge={class:"relative"},Je={key:0,class:"fixed h-full w-full top-0 left-0 radar-background"},Ke=H(()=>x("div",{class:"fixed w-full top-0 h-[20vh] bg-gradient-to-b from-sky-900 to-70%"},null,-1)),Xe={key:0,class:"fixed left-0 top-0 translate-y-[-180%] container text-center"},Ze=H(()=>x("div",{class:"text-md text-yellow-200"}," ¡Vaya! Parece que aquí no hay nada ",-1)),et=[Ze],tt={key:0},ot={__name:"map",async setup(e){let t,o;const l=Ce(),{data:n}=([t,o]=ke(()=>Me("locations",()=>$e("location").find(),{transform:s=>Object.keys(s).map(w=>s[w])})),t=await t,o(),t),a=Ne(),u=xe(),v=Ie();i(null);const d=i(null),f=i(null),p=i(null),_=i(null),y=i(null),m=i(),C=i(!1),h=i(),I=i(),j=i(),z=i(0),M=i(!1),{width:R,height:nt}=Ue(),Q=s=>new Promise(function(w){setTimeout(()=>w(),s)}),U=()=>{const s=_.value.getBoundingClientRect(),w=s.top+s.height/2;s.left+s.width/2;const L=d.value.getBoundingClientRect();d.value.style.top=`${w-L.height/2}px`},Y=s=>{M.value||(M.value=!0,a.value.toggleCenitalView({onComplete:()=>{M.value=!1}}))},G=async()=>{const s=Oe.timeline();j.value=await Te.requestLocation(),j.value&&(m.value=!0,s.add("start").to(p.value,{x:-R.value},"start").to(y.value,{x:R.value},"start"),Promise.all([A.getCurrentLocation(),Q(4e3)]).then(([w])=>{h.value=n.value.find(L=>A.nearbyLocation(w,L.place.coordinate)),m.value=!1,I.value=!0,h.value?(f.value.show({expanded:!1}),s.to(_.value,{y:R.value*.5})):s.add("start").to(p.value,{x:0},"start").to(y.value,{x:0},"start"),h.value?setTimeout(()=>{v.push({path:`${h.value._path}/model`})},5e3):setTimeout(()=>{I.value=!1},2e3)}))},J=s=>{a.value.hide(),f.value.hide(),C.value=!0},K=s=>{setTimeout(()=>{a.value.show()},300),f.value.show({expanded:!0,onComplete:()=>{C.value=!1}})};return q(()=>{_.value&&d.value&&U(),C.value||m.value||I.value?l.value=$.sky[900]:l.value=u.value?$.teal[700]:$.teal[500]}),N(()=>{f.value&&f.value.show({expanded:!0}),a.value&&(a.value.show(),a.value.showLocations())}),Le(()=>{a.value&&a.value.hideLocations()}),(s,w)=>{const L=ie,X=ce,Z=le,ee=ue,te=de,B=fe,oe=me,ne=pe,ae=_e,se=he,re=ve;return g(),k(Se,null,[c(E,{name:"fade",appear:""},{default:b(()=>[r(h)?(g(),k("div",Ye,[c(L,{location:r(h)},null,8,["location"])])):S("",!0)]),_:1}),x("div",Ge,[c(X,{"enable-night-mode-change":""}),c(E,{name:"fade",appear:""},{default:b(()=>[r(m)||r(I)&&!r(h)?(g(),k("div",Je)):S("",!0)]),_:1}),r(m)?(g(),k("div",{key:0,ref_key:"radarRef",ref:d,class:"fixed top-0 left-0 w-screen h-screen"},[c(Z),Ke],512)):S("",!0),c(se,{ref_key:"navRef",ref:f,"inital-state":"hide",centered:""},{default:b(()=>[x("div",{ref_key:"compassButtonRef",ref:p},[c(B,{onClick:Y,class:"bg-yellow-200 h-16 w-16 relative flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[c(ee,{class:"absolute w-full h-full"}),c(te,{class:"h-8 w-8",style:P({transform:`rotate(${r(z)}deg)`})},null,8,["style"])]),_:1})],512),x("div",{ref_key:"searchButtonRef",ref:_,class:"relative"},[c(E,{name:"fade",appear:""},{default:b(()=>[r(I)&&!r(h)?(g(),k("div",Xe,et)):S("",!0)]),_:1}),c(B,{onClick:G,class:Re(["bg-cyan-100 p-11",{"border-[3px] border-yellow-100 p-9":r(m)||r(h)}]),style:P({background:r(m)||r(h)?"linear-gradient(180deg, #001725 0%, rgba(0, 23, 37, 0.00) 100%)":"#EFFDFD"}),format:"circle",shadowed:""},{default:b(()=>[r(m)||r(h)?(g(),V(oe,{key:0,class:"h-12 w-12"})):(g(),V(ne,{key:1,class:"h-8 w-8"}))]),_:1},8,["class","style"])],512),x("div",{ref_key:"menuButtonRef",ref:y},[c(B,{onClick:J,class:"bg-yellow-200 h-16 w-16 flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[c(ae,{class:"h-8 w-8"})]),_:1})],512)]),_:1},512)]),r(C)?(g(),k("div",tt,[c(re,{onClose:K})])):S("",!0)],64)}}},Rt=je(ot,[["__scopeId","data-v-f3d6acd1"]]);export{Rt as default};
