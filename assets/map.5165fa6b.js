import ee from"./LocationFound.679ce347.js";import te from"./Logo.27cc866e.js";import oe from"./Radar.df7a0cac.js";import ae from"./CompassCardinalPoints.d6fd8abf.js";import ne from"./Compass.aeca3a7d.js";import se from"./Button.9c18f6d8.js";import le from"./Intersect.b2b0c568.js";import ce from"./Search.da4b5dcb.js";import re from"./Menu.23f41a2a.js";import ie from"./NavigationBar.ce62a6a7.js";import ue from"./Menu.6d6eddeb.js";import{bH as me,c4 as de,bD as _e,bn as fe,r as a,i as pe,b as ve,l as he,k as m,h as o,w as i,bG as B,f as d,u as t,j as p,bC as ye,b_ as we,o as r,bk as S,bj as ge,c as P,bQ as Ce,bR as ke,bI as I}from"./entry.e8f6477f.js";import{q as xe}from"./query.c5d58b70.js";import{u as be}from"./map.01992387.js";import{P as Re,L as q}from"./permission.dd244a3c.js";import{g as Be}from"./index.4db78ffb.js";import{a as Ie}from"./index.9cfea1e7.js";import{_ as Le}from"./_plugin-vue_export-helper.c27b6911.js";import"./Diamond.196ef06c.js";import"./BlurredCircle.e315e99f.js";import"./tw-merge.1166cefb.js";import"./nuxt-link.fd2a9f93.js";import"./SectionHeading.02c87b46.js";import"./Cross.c9266bb3.js";import"./utils.19162347.js";import"./preview.cf4586ef.js";const F=v=>(Ce("data-v-f3d6acd1"),v=v(),ke(),v),$e={key:0},Me={class:"relative"},Se={key:0,class:"fixed h-full w-full top-0 left-0 radar-background"},Pe=F(()=>d("div",{class:"fixed w-full top-0 h-[20vh] bg-gradient-to-b from-sky-900 to-70%"},null,-1)),qe={key:0,class:"fixed left-0 top-0 translate-y-[-180%] container text-center"},Fe=F(()=>d("div",{class:"text-md text-yellow-200"}," ¡Vaya! Parece que aquí no hay nada ",-1)),Te=[Fe],je={key:0},Ne={__name:"map",async setup(v){let h,L;const $=me(),{data:T}=([h,L]=de(()=>we("locations",()=>xe("location").find(),{transform:e=>Object.keys(e).map(c=>e[c])})),h=await h,L(),h),s=be(),j=_e(),N=fe();a(null);const y=a(null),u=a(null),C=a(null),w=a(null),k=a(null),l=a(),g=a(!1),n=a(),_=a(),M=a(),V=a(0),x=a(!1),{width:b,height:Ve}=Ie(),D=e=>new Promise(function(c){setTimeout(()=>c(),e)}),z=()=>{const e=w.value.getBoundingClientRect(),c=e.top+e.height/2;e.left+e.width/2;const f=y.value.getBoundingClientRect();y.value.style.top=`${c-f.height/2}px`},E=e=>{x.value||(x.value=!0,s.value.toggleCenitalView({onComplete:()=>{x.value=!1}}))},U=async()=>{const e=Be.timeline();M.value=await Re.requestLocation(),M.value&&(l.value=!0,e.add("start").to(C.value,{x:-b.value},"start").to(k.value,{x:b.value},"start"),Promise.all([q.getCurrentLocation(),D(4e3)]).then(([c])=>{n.value=T.value.find(f=>q.nearbyLocation(c,f.place.coordinate)),l.value=!1,_.value=!0,n.value?(u.value.show({expanded:!1}),e.to(w.value,{y:b.value*.5})):e.add("start").to(C.value,{x:0},"start").to(k.value,{x:0},"start"),n.value?setTimeout(()=>{N.push({path:`${n.value._path}/model`})},5e3):setTimeout(()=>{_.value=!1},2e3)}))},A=e=>{s.value.hide(),u.value.hide(),g.value=!0},H=e=>{setTimeout(()=>{s.value.show()},300),u.value.show({expanded:!0,onComplete:()=>{g.value=!1}})};return pe(()=>{w.value&&y.value&&z(),g.value||l.value||_.value?$.value=I.sky[900]:$.value=j.value?I.teal[700]:I.teal[500]}),ve(()=>{u.value&&u.value.show({expanded:!0}),s.value&&(s.value.show(),s.value.showLocations())}),he(()=>{s.value&&s.value.hideLocations()}),(e,c)=>{const f=ee,W=te,G=oe,O=ae,Q=ne,R=se,X=le,J=ce,K=re,Y=ie,Z=ue;return r(),m(ye,null,[o(B,{name:"fade",appear:""},{default:i(()=>[t(n)?(r(),m("div",$e,[o(f,{location:t(n)},null,8,["location"])])):p("",!0)]),_:1}),d("div",Me,[o(W,{"enable-night-mode-change":""}),o(B,{name:"fade",appear:""},{default:i(()=>[t(l)||t(_)&&!t(n)?(r(),m("div",Se)):p("",!0)]),_:1}),t(l)?(r(),m("div",{key:0,ref_key:"radarRef",ref:y,class:"fixed top-0 left-0 w-screen h-screen"},[o(G),Pe],512)):p("",!0),o(Y,{ref_key:"navRef",ref:u,"inital-state":"hide",centered:""},{default:i(()=>[d("div",{ref_key:"compassButtonRef",ref:C},[o(R,{onClick:E,class:"bg-yellow-200 h-16 w-16 relative flex justify-center items-center",format:"circle",shadowed:""},{default:i(()=>[o(O,{class:"absolute w-full h-full"}),o(Q,{class:"h-8 w-8",style:S({transform:`rotate(${t(V)}deg)`})},null,8,["style"])]),_:1})],512),d("div",{ref_key:"searchButtonRef",ref:w,class:"relative"},[o(B,{name:"fade",appear:""},{default:i(()=>[t(_)&&!t(n)?(r(),m("div",qe,Te)):p("",!0)]),_:1}),o(R,{onClick:U,class:ge(["bg-cyan-100 p-11",{"border-[3px] border-yellow-100 p-9":t(l)||t(n)}]),style:S({background:t(l)||t(n)?"linear-gradient(180deg, #001725 0%, rgba(0, 23, 37, 0.00) 100%)":"#EFFDFD"}),format:"circle",shadowed:""},{default:i(()=>[t(l)||t(n)?(r(),P(X,{key:0,class:"h-12 w-12"})):(r(),P(J,{key:1,class:"h-8 w-8"}))]),_:1},8,["class","style"])],512),d("div",{ref_key:"menuButtonRef",ref:k},[o(R,{onClick:A,class:"bg-yellow-200 h-16 w-16 flex justify-center items-center",format:"circle",shadowed:""},{default:i(()=>[o(K,{class:"h-8 w-8"})]),_:1})],512)]),_:1},512)]),t(g)?(r(),m("div",je,[o(Z,{onClose:H})])):p("",!0)],64)}}},mt=Le(Ne,[["__scopeId","data-v-f3d6acd1"]]);export{mt as default};
