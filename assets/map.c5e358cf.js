import ie from"./LocationFound.6413c032.js";import re from"./Logo.0c1b25a5.js";import ce from"./Radar.5ce4f28c.js";import le from"./CompassCardinalPoints.2c3cef6e.js";import ue from"./Compass.86b54258.js";import de from"./Button.16701b4f.js";import fe from"./Intersect.99f407d4.js";import me from"./Search.4633a6ce.js";import pe from"./Menu.340a2808.js";import _e from"./NavigationBar.0a012f14.js";import ve from"./Menu.7c4f8e65.js";import{bZ as F,b as T,bO as he,c2 as ye,u as i,c3 as we,r,bM as V,i as W,bi as ge,b$ as be,c0 as Ce,bD as ke,bn as xe,l as Ie,k as C,h as l,w as b,bG as B,f as k,j as L,bC as Le,bT as Me,o as g,bk as j,bj as Se,c as P,bH as Re,bI as Be,b_ as E}from"./entry.c4142aad.js";import{q as Ee}from"./query.1b97921e.js";import{u as Te}from"./map.362b711f.js";import{P as Ne,L as A}from"./permission.dd244a3c.js";import{g as $e}from"./index.4db78ffb.js";import{_ as Oe}from"./_plugin-vue_export-helper.c27b6911.js";import"./Diamond.641e8c0c.js";import"./BlurredCircle.fae37d26.js";import"./tw-merge.1166cefb.js";import"./nuxt-link.afd284ba.js";import"./SectionHeading.79f8e45c.js";import"./Cross.76252ec3.js";import"./utils.7a4b3006.js";import"./preview.ef7411f2.js";function q(e){return ye()?(we(e),!0):!1}function N(e){return typeof e=="function"?e():i(e)}const je=typeof window<"u"&&typeof document<"u",Pe=Object.prototype.toString,Ae=e=>Pe.call(e)==="[object Object]",Fe=()=>{};function Ve(e,t=!0){F()?T(e):t?e():he(e)}function We(e){var t;const o=N(e);return(t=o==null?void 0:o.$el)!=null?t:o}const $=je?window:void 0;function qe(...e){let t,o,u,n;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,u,n]=e,t=$):[t,o,u,n]=e,!t)return Fe;Array.isArray(o)||(o=[o]),Array.isArray(u)||(u=[u]);const a=[],d=()=>{a.forEach(p=>p()),a.length=0},f=(p,h,m,y)=>(p.addEventListener(h,m,y),()=>p.removeEventListener(h,m,y)),c=V(()=>[We(t),N(n)],([p,h])=>{if(d(),!p)return;const m=Ae(h)?{...h}:h;a.push(...o.flatMap(y=>u.map(_=>f(p,y,_,m))))},{immediate:!0,flush:"post"}),v=()=>{c(),d()};return q(v),v}function De(){const e=r(!1);return F()&&T(()=>{e.value=!0}),e}function He(e){const t=De();return ge(()=>(t.value,!!e()))}function ze(e,t={}){const{window:o=$}=t,u=He(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function");let n;const a=r(!1),d=v=>{a.value=v.matches},f=()=>{n&&("removeEventListener"in n?n.removeEventListener("change",d):n.removeListener(d))},c=W(()=>{u.value&&(f(),n=o.matchMedia(N(e)),"addEventListener"in n?n.addEventListener("change",d):n.addListener(d),a.value=n.matches)});return q(()=>{c(),f(),n=void 0}),a}function Ue(e={}){const{window:t=$,initialWidth:o=Number.POSITIVE_INFINITY,initialHeight:u=Number.POSITIVE_INFINITY,listenOrientation:n=!0,includeScrollbar:a=!0}=e,d=r(o),f=r(u),c=()=>{t&&(a?(d.value=t.innerWidth,f.value=t.innerHeight):(d.value=t.document.documentElement.clientWidth,f.value=t.document.documentElement.clientHeight))};if(c(),Ve(c),qe("resize",c,{passive:!0}),n){const v=ze("(orientation: portrait)");V(v,()=>c())}return{width:d,height:f}}const D=e=>(Re("data-v-eb821f6f"),e=e(),Be(),e),Qe={key:0},Ye={class:"relative"},Ge={key:0,class:"fixed h-full w-full top-0 left-0 radar-background"},Xe=D(()=>k("div",{class:"fixed w-full top-0 h-[20vh] bg-gradient-to-b from-sky-900 to-70%"},null,-1)),Ze={key:0,class:"fixed left-0 top-0 translate-y-[-180%] container text-center"},Je=D(()=>k("div",{class:"text-md text-yellow-200"}," ¡Vaya! Parece que aquí no hay nada ",-1)),Ke=[Je],et={key:0},tt={__name:"map",async setup(e){let t,o;const u=be(),{data:n}=([t,o]=Ce(()=>Me("locations",()=>Ee("location").find(),{transform:s=>Object.keys(s).map(w=>s[w])})),t=await t,o(),t),a=Te(),d=ke();xe(),r(null);const f=r(null),c=r(null),v=r(null),p=r(null),h=r(null),m=r(),y=r(!1),_=r(),x=r(),O=r(),H=r(0),M=r(!1),{width:S,height:ot}=Ue(),z=s=>new Promise(function(w){setTimeout(()=>w(),s)}),U=()=>{const s=p.value.getBoundingClientRect(),w=s.top+s.height/2;s.left+s.width/2;const I=f.value.getBoundingClientRect();f.value.style.top=`${w-I.height/2}px`},Q=s=>{M.value||(M.value=!0,a.value.toggleCenitalView({onComplete:()=>{M.value=!1}}))},Y=async()=>{const s=$e.timeline();O.value=await Ne.requestLocation(),O.value&&(m.value=!0,s.add("start").to(v.value,{x:-S.value},"start").to(h.value,{x:S.value},"start"),Promise.all([A.getCurrentLocation(),z(4e3)]).then(([w])=>{_.value=n.value.find(I=>A.nearbyLocation(w,I.place.coordinate)),m.value=!1,x.value=!0,_.value?(c.value.show({expanded:!1}),s.to(p.value,{y:S.value*.5})):s.add("start").to(v.value,{x:0},"start").to(h.value,{x:0},"start"),_.value?setTimeout(()=>{},5e3):setTimeout(()=>{x.value=!1},2e3)}))},G=s=>{a.value.hide(),c.value.hide(),y.value=!0},X=s=>{setTimeout(()=>{a.value.show()},300),c.value.show({expanded:!0,onComplete:()=>{y.value=!1}})};return W(()=>{p.value&&f.value&&U(),y.value||m.value||x.value?u.value=E.sky[900]:u.value=d.value?E.teal[700]:E.teal[500]}),T(()=>{c.value&&c.value.show({expanded:!0}),a.value&&(a.value.show(),a.value.showLocations())}),Ie(()=>{a.value&&a.value.hideLocations()}),(s,w)=>{const I=ie,Z=re,J=ce,K=le,ee=ue,R=de,te=fe,oe=me,ne=pe,ae=_e,se=ve;return g(),C(Le,null,[l(B,{name:"fade",appear:""},{default:b(()=>[i(_)?(g(),C("div",Qe,[l(I,{location:i(_)},null,8,["location"])])):L("",!0)]),_:1}),k("div",Ye,[l(Z,{"enable-night-mode-change":""}),l(B,{name:"fade",appear:""},{default:b(()=>[i(m)||i(x)&&!i(_)?(g(),C("div",Ge)):L("",!0)]),_:1}),i(m)?(g(),C("div",{key:0,ref_key:"radarRef",ref:f,class:"fixed top-0 left-0 w-screen h-screen"},[l(J),Xe],512)):L("",!0),l(ae,{ref_key:"navRef",ref:c,"inital-state":"hide",centered:""},{default:b(()=>[k("div",{ref_key:"compassButtonRef",ref:v},[l(R,{onClick:Q,class:"bg-yellow-200 h-16 w-16 relative flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[l(K,{class:"absolute w-full h-full"}),l(ee,{class:"h-8 w-8",style:j({transform:`rotate(${i(H)}deg)`})},null,8,["style"])]),_:1})],512),k("div",{ref_key:"searchButtonRef",ref:p,class:"relative"},[l(B,{name:"fade",appear:""},{default:b(()=>[i(x)&&!i(_)?(g(),C("div",Ze,Ke)):L("",!0)]),_:1}),l(R,{onClick:Y,class:Se(["bg-cyan-100 p-11",{"border-[3px] border-yellow-100 p-9":i(m)||i(_)}]),style:j({background:i(m)||i(_)?"linear-gradient(180deg, #001725 0%, rgba(0, 23, 37, 0.00) 100%)":"#EFFDFD"}),format:"circle",shadowed:""},{default:b(()=>[i(m)||i(_)?(g(),P(te,{key:0,class:"h-12 w-12"})):(g(),P(oe,{key:1,class:"h-8 w-8"}))]),_:1},8,["class","style"])],512),k("div",{ref_key:"menuButtonRef",ref:h},[l(R,{onClick:G,class:"bg-yellow-200 h-16 w-16 flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[l(ne,{class:"h-8 w-8"})]),_:1})],512)]),_:1},512)]),i(y)?(g(),C("div",et,[l(se,{onClose:X})])):L("",!0)],64)}}},St=Oe(tt,[["__scopeId","data-v-eb821f6f"]]);export{St as default};
