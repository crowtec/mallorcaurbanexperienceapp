import T from"./Button.44603379.js";import V from"./Cross.94bc275d.js";import{bq as E,bo as H,bK as $,r as f,b as G,u as e,o as a,l as s,f as n,bD as d,h as l,w as u,bG as h,j as p,bC as B}from"./entry.e4bb31af.js";import{a as O,d as U,B as F}from"./device.fe62fe19.js";import{u as z}from"./index.0cc3374f.js";import"./nuxt-link.0bbc238c.js";import"./tw-merge.1166cefb.js";function K(_,t,o){const i=_.getTime(),r=t.getTime();return Math.abs(r-i)/(1e3*60)>=o}const W={key:0,class:"fixed w-full top-0 left-0 px-5 py-6"},J={class:"relative w-full bg-blue-900/90 px-5 py-6 rounded-2xl border-2 boder-green-100"},L={class:"flex items-center justify-between gap-6 w-full"},Q=n("div",{class:"text-green-100 text-xs"}," Para una mejor experiencia instala la app en tu dispositivo. ",-1),X={key:0,class:"flex flex-col gap-6 px-6 pt-16 pb-6"},Y=B('<div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">01</div><div class="text-green-100"> Haz click en el icono de &quot;Compartir&quot; del navegador. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">02</div><div class="text-green-100"> Selecciona la opción &quot;Añadir a pantalla de inicio&quot;. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">03</div><div class="text-green-100"> Confirma la instalación pulsando el botón de &quot;Añadir&quot;. </div></div>',3),Z={key:1,class:"flex gap-6"},ee=n("div",{class:"slashed-zero text-green-100 text-2xl"},"01",-1),te=n("div",{class:"text-green-100"}," Abre la web desde Safari para instalar la aplicación en iOS. ",-1),ae=[ee,te],se=B('<div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">01</div><div class="text-green-100"> Haz click en el icono de &quot;Menú&quot; del navegador. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">02</div><div class="text-green-100"> Selecciona la opción &quot;Instalar&quot; o &quot;Instalar aplicación&quot;. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">03</div><div class="text-green-100"> Confirma la instalación pulsando el botón de &quot;Instalar&quot;. </div></div>',3),le={class:"flex items-center justify-between gap-6 w-full"},ne=n("div",{class:"text-green-100 text-xs"}," Para una mejor experiencia instala la app en tu dispositivo. ",-1),oe={class:"flex items-center justify-between gap-6 w-full"},ie=n("div",{class:"text-green-100 text-xs"}," Hay una nueva versión de la aplicación, pulsa el botón para actualizarla. ",-1),ge={__name:"PwaToast",setup(_){const{$pwa:t}=E();H(),$();const o=z("pwa-installation-cancelled",!1,localStorage),i=z("pwa-installation-cancelled-date",void 0,localStorage),r=f(),x=f(!1),v=f(!1),b=f(),P=async()=>{t.install()},R=()=>{t.updateServiceWorker()},M=()=>{x.value=!x.value},j=()=>{t.cancelInstall(),o.value=!0,i.value=new Date},N=()=>{t.cancelPrompt(),o.value=!0,i.value=new Date},A=()=>{o.value=!0,i.value=new Date};return G(()=>{v.value=O(),b.value=U(),r.value=typeof BeforeInstallPromptEvent<"u",i.value&&K(new Date(i.value),new Date,5)&&(console.log("resetShowInstallPrompt"),localStorage.removeItem("vite-pwa:hide-install"),o.value=!1,r.value&&window.location.reload())}),(g,re)=>{var w,I,k,y,C,q,S,D;const c=T,m=V;return!e(t).isInstalled&&!e(o)&&(!e(r)||(w=e(t))!=null&&w.needRefresh||(I=e(t))!=null&&I.showInstallPrompt&&!((k=e(t))!=null&&k.offlineReady)&&!((y=e(t))!=null&&y.needRefresh))?(a(),s("div",W,[n("div",J,[e(r)?p("",!0):(a(),s(d,{key:0},[n("div",L,[Q,l(c,{class:"bg-green-100 px-6 py-2 text-xs",onClick:M,format:"rounded"},{default:u(()=>[h("Instrucciones")]),_:1})]),e(x)?(a(),s("div",X,[e(v)?(a(),s(d,{key:0},[e(b)===("Browsers"in g?g.Browsers:e(F)).Safari?(a(),s(d,{key:0},[Y],64)):(a(),s("div",Z,ae))],64)):(a(),s(d,{key:1},[se],64))])):p("",!0),l(c,{class:"absolute bg-green-100 border-2 border-green-100 absolute p-1 text-xs top-0 right-0 -translate-y-1/3 translate-x-1/3",format:"rounded",onClick:A},{default:u(()=>[l(m,{class:"text-green-100 h-2.5 w-2.5"})]),_:1})],64)),e(r)&&((C=e(t))!=null&&C.showInstallPrompt)&&!((q=e(t))!=null&&q.offlineReady)&&!((S=e(t))!=null&&S.needRefresh)?(a(),s(d,{key:1},[n("div",le,[ne,l(c,{class:"bg-green-100 px-6 py-2 text-xs",onClick:P,format:"rounded"},{default:u(()=>[h("Instalar")]),_:1})]),l(c,{class:"absolute bg-green-100 border-2 border-green-100 absolute p-1 text-xs top-0 right-0 -translate-y-1/3 translate-x-1/3",onClick:j,format:"rounded"},{default:u(()=>[l(m,{class:"text-green-100 h-2.5 w-2.5"})]),_:1})],64)):p("",!0),(D=e(t))!=null&&D.needRefresh?(a(),s(d,{key:2},[n("div",oe,[ie,l(c,{class:"bg-green-100 px-6 py-2 text-xs",onClick:R,format:"rounded"},{default:u(()=>[h("Actualizar")]),_:1})]),l(c,{class:"absolute bg-green-100 border-2 border-green-100 absolute p-1 text-xs top-0 right-0 -translate-y-1/3 translate-x-1/3",onClick:N,format:"rounded"},{default:u(()=>[l(m,{class:"text-green-100 h-2.5 w-2.5"})]),_:1})],64)):p("",!0)])])):p("",!0)}}};export{ge as default};
