import O from"./NightLights.948e392b.js";import P from"./DayLights.fd292960.js";import T from"./MapEntity.4cc844e9.js";import{_ as $}from"./client-only.06535a07.js";import{i as D,q as E,u as U,x as i,z as H,bE as W,bF as q,f as G,r as x,o as n,c as s,b as a,w,j as M,T as Q,a as u,n as J,k as c,F as l,bG as K,g as X,bH as Y,bI as Z}from"./entry.ad8edec5.js";import{u as ee}from"./locations.4c7eef6a.js";import{g as S}from"./index.4db78ffb.js";import"./Light.ebf031ec.js";import"./index.8e51aadd.js";const oe=""+new URL("pin_empty.3089d126.glb",import.meta.url).href,te=""+new URL("pin_filled.09e8dc87.glb",import.meta.url).href;const f=r=>(Y("data-v-55c7e4fd"),r=r(),Z(),r),ne={key:0,class:"map__placeholder fixed top-0 left-0 h-full w-full"},ae=f(()=>u("div",{class:"fixed w-full top-0 h-[30vh] bg-gradient-to-b from-teal-700 to-70% pointer-events-none"},null,-1)),se=f(()=>u("div",{class:"fixed w-full bottom-0 h-[30vh] bg-gradient-to-t from-teal-700 to-70%"},null,-1)),ie=f(()=>u("div",{class:"fixed w-full top-0 h-[30vh] bg-gradient-to-b from-teal-500 to-70% pointer-events-none"},null,-1)),le=f(()=>u("div",{class:"fixed w-full bottom-0 h-[30vh] bg-gradient-to-b from-teal-500 to-70% rotate-180"},null,-1)),ce={__name:"Map",props:{locations:{type:Array,default:[]}},setup(r,{expose:j}){const V=E(),z=ee(),_=U(),d=i(!1),v=i(!1),p=i(!0),b=i(!1),C=i(!1),k=i(!1),g=i(!0),F={target:"0 -1.7 -0.5",initialPosition:"0 20 0",rotateSpeed:"0.5",enablePan:"false",minPolarAngle:"0",maxPolarAngle:"70",minDistance:"10",maxDistance:"30",zoomSpeed:"0.4",dampingFactor:"0.1",enabled:"true",enableDamping:"true"};j({show:()=>p.value=!0,hide:()=>p.value=!1,toggleCenitalView:({onComplete:e=()=>{}}={})=>{if(v.value=!v.value,d.value){const o=S.timeline(),t=d.value.components["orbit-controls"],m=t.controls.object;v.value?o.to(m.position,{x:0,y:20,z:0,onComplete:()=>{t.controls.enabled=!1,e&&e()}}):(t.controls.enabled=!0,o.to(m.position,{x:0,y:10,z:16,onComplete:()=>{e&&e()}}))}},showLocations:()=>b.value=!0,hideLocations:()=>b.value=!1}),H(()=>{W(()=>{const e=S.timeline();if(d.value){const o=d.value.components["orbit-controls"],t=o.controls.object;o.controls.enabled=!0,e.to(t.position,{x:0,y:10,z:16})}})}),q(()=>{var o,t;const e=(o=document.getElementsByTagName("html"))==null?void 0:o[0];(t=e==null?void 0:e.classList)==null||t.remove("a-fullscreen")}),G(()=>{k.value&&C.value&&(g.value=!1)});const I=e=>{V.push({path:e})};return(e,o)=>{const t=x("a-sky"),m=O,N=P,R=T,L=x("a-entity"),A=x("a-scene"),B=$;return n(),s(l,null,[a(Q,{name:"fade",appear:""},{default:w(()=>[g.value?(n(),s("div",ne)):M("",!0)]),_:1}),a(B,null,{default:w(()=>[u("div",{class:J(["transition-opacity duration-[1500ms]",g.value?"opacity-0 invisible":"opacity-100 visible"])},[a(A,{ref:"sceneRef",visible:p.value,shadow:"type: pcf",fog:c(_)?"type: exponential; color: #1A1C25; density: 0.030;":"type: exponential; color: #047C87; density: 0.020;","device-orientation-permission-ui":"enabled: false",renderer:`antialias: true;
                    colorManagement: true;
                    sortObjects: false;
                    physicallyCorrectLights: true;
                    maxCanvasWidth: 1920;
                    maxCanvasHeight: 1920;`,cursor:"rayOrigin: mouse",raycaster:"objects: .location",onLoaded:o[1]||(o[1]=()=>k.value=!0)},{default:w(()=>[c(_)?(n(),s(l,{key:0},[a(t,{color:"#1A1C25"}),a(m)],64)):(n(),s(l,{key:1},[a(t,{color:"#047C87"}),a(N)],64)),a(R,{onModelLoaded:o[0]||(o[0]=()=>C.value=!0)}),(n(!0),s(l,null,K(r.locations,(h,y)=>(n(),X(L,{key:y,id:`location-${y}`,"gltf-model":c(z).includes(h._id)?c(te):c(oe),position:h.place.position,visible:b.value,class:"location","animation-mixer":"",animation:`property: scale; to: 0.24 0.24 0.24; dur: 1000; easing: easeInQuad; loop: true; dir:alternate; delay: ${y*100}`,rotation:"0 0 0",scale:"0.2 0.2 0.2",onClick:fe=>I(h._path)},null,8,["id","gltf-model","position","visible","animation","onClick"]))),128)),a(L,{ref_key:"cameraRef",ref:d,id:"camera",camera:"","look-controls":"enabled:false","orbit-controls":F},null,512)]),_:1},8,["visible","fog"])],2)]),_:1}),p.value?(n(),s(l,{key:0},[c(_)?(n(),s(l,{key:0},[ae,se],64)):(n(),s(l,{key:1},[ie,le],64))],64)):M("",!0)],64)}}},ke=D(ce,[["__scopeId","data-v-55c7e4fd"]]);export{ke as default};
