import ee from"./LocationFound.349097e6.js";import te from"./Logo.d19d8c2d.js";import oe from"./Radar.affd2478.js";import ae from"./CompassCardinalPoints.2a5f14ae.js";import se from"./Compass.b87e696f.js";import ne from"./Button.78410c1a.js";import le from"./Intersect.597c37f1.js";import ce from"./Search.30b1f25a.js";import re from"./Menu.9e851fdd.js";import ie from"./NavigationBar.f4691aa7.js";import ue from"./Menu.838f66f2.js";import{k as me,bI as de,c5 as fe,bE as _e,bo as pe,r as a,i as ve,b as he,m as ye,l as m,h as o,w as i,bH as B,f as d,u as t,j as p,bD as we,b$ as ge,o as r,bl as M,bk as Ce,c as P,bR as ke,bS as xe,bJ as I}from"./entry.7f107ee1.js";import{q as be}from"./query.8ea60c3c.js";import{u as Re}from"./map.f3042143.js";import{P as Be,L as q}from"./permission.dd244a3c.js";import{g as Ie}from"./index.4db78ffb.js";import{a as Le}from"./index.55e89a09.js";import"./Diamond.aca50151.js";import"./BlurredCircle.8ac9dad5.js";import"./tw-merge.1166cefb.js";import"./nuxt-link.1d3fecd0.js";import"./SectionHeading.788b6f5c.js";import"./Cross.5256dda7.js";import"./utils.04fa7efe.js";import"./preview.952d69ca.js";const F=v=>(ke("data-v-f3d6acd1"),v=v(),xe(),v),$e={key:0},Se={class:"relative"},Me={key:0,class:"fixed h-full w-full top-0 left-0 radar-background"},Pe=F(()=>d("div",{class:"fixed w-full top-0 h-[20vh] bg-gradient-to-b from-sky-900 to-70%"},null,-1)),qe={key:0,class:"fixed left-0 top-0 translate-y-[-180%] container text-center"},Fe=F(()=>d("div",{class:"text-md text-yellow-200"}," ¡Vaya! Parece que aquí no hay nada ",-1)),Te=[Fe],Ne={key:0},Ve={__name:"map",async setup(v){let h,L;const $=de(),{data:T}=([h,L]=fe(()=>ge("locations",()=>be("location").find(),{transform:e=>Object.keys(e).map(c=>e[c])})),h=await h,L(),h),n=Re(),N=_e(),V=pe();a(null);const y=a(null),u=a(null),C=a(null),w=a(null),k=a(null),l=a(),g=a(!1),s=a(),f=a(),S=a(),j=a(0),x=a(!1),{width:b,height:je}=Le(),D=e=>new Promise(function(c){setTimeout(()=>c(),e)}),E=()=>{const e=w.value.getBoundingClientRect(),c=e.top+e.height/2;e.left+e.width/2;const _=y.value.getBoundingClientRect();y.value.style.top=`${c-_.height/2}px`},z=e=>{x.value||(x.value=!0,n.value.toggleCenitalView({onComplete:()=>{x.value=!1}}))},U=async()=>{const e=Ie.timeline();S.value=await Be.requestLocation(),S.value&&(l.value=!0,e.add("start").to(C.value,{x:-b.value},"start").to(k.value,{x:b.value},"start"),Promise.all([q.getCurrentLocation(),D(4e3)]).then(([c])=>{s.value=T.value.find(_=>q.nearbyLocation(c,_.place.coordinate)),l.value=!1,f.value=!0,s.value?(u.value.show({expanded:!1}),e.to(w.value,{y:b.value*.5})):e.add("start").to(C.value,{x:0},"start").to(k.value,{x:0},"start"),s.value?setTimeout(()=>{V.push({path:`${s.value._path}/model`})},5e3):setTimeout(()=>{f.value=!1},2e3)}))},A=e=>{n.value.hide(),u.value.hide(),g.value=!0},H=e=>{setTimeout(()=>{n.value.show()},300),u.value.show({expanded:!0,onComplete:()=>{g.value=!1}})};return ve(()=>{w.value&&y.value&&E(),g.value||l.value||f.value?$.value=I.sky[900]:$.value=N.value?I.teal[700]:I.teal[500]}),he(()=>{u.value&&u.value.show({expanded:!0}),n.value&&(n.value.show(),n.value.showLocations())}),ye(()=>{n.value&&n.value.hideLocations()}),(e,c)=>{const _=ee,W=te,J=oe,O=ae,X=se,R=ne,G=le,K=ce,Q=re,Y=ie,Z=ue;return r(),m(we,null,[o(B,{name:"fade",appear:""},{default:i(()=>[t(s)?(r(),m("div",$e,[o(_,{location:t(s)},null,8,["location"])])):p("",!0)]),_:1}),d("div",Se,[o(W,{"enable-night-mode-change":""}),o(B,{name:"fade",appear:""},{default:i(()=>[t(l)||t(f)&&!t(s)?(r(),m("div",Me)):p("",!0)]),_:1}),t(l)?(r(),m("div",{key:0,ref_key:"radarRef",ref:y,class:"fixed top-0 left-0 w-screen h-screen"},[o(J),Pe],512)):p("",!0),o(Y,{ref_key:"navRef",ref:u,"inital-state":"hide",centered:""},{default:i(()=>[d("div",{ref_key:"compassButtonRef",ref:C},[o(R,{onClick:z,class:"bg-yellow-200 h-16 w-16 relative flex justify-center items-center",format:"circle",shadowed:""},{default:i(()=>[o(O,{class:"absolute w-full h-full"}),o(X,{class:"h-8 w-8",style:M({transform:`rotate(${t(j)}deg)`})},null,8,["style"])]),_:1})],512),d("div",{ref_key:"searchButtonRef",ref:w,class:"relative"},[o(B,{name:"fade",appear:""},{default:i(()=>[t(f)&&!t(s)?(r(),m("div",qe,Te)):p("",!0)]),_:1}),o(R,{onClick:U,class:Ce(["bg-cyan-100 p-11",{"border-[3px] border-yellow-100 p-9":t(l)||t(s)}]),style:M({background:t(l)||t(s)?"linear-gradient(180deg, #001725 0%, rgba(0, 23, 37, 0.00) 100%)":"#EFFDFD"}),format:"circle",shadowed:""},{default:i(()=>[t(l)||t(s)?(r(),P(G,{key:0,class:"h-12 w-12"})):(r(),P(K,{key:1,class:"h-8 w-8"}))]),_:1},8,["class","style"])],512),d("div",{ref_key:"menuButtonRef",ref:k},[o(R,{onClick:A,class:"bg-yellow-200 h-16 w-16 flex justify-center items-center",format:"circle",shadowed:""},{default:i(()=>[o(Q,{class:"h-8 w-8"})]),_:1})],512)]),_:1},512)]),t(g)?(r(),m("div",Ne,[o(Z,{onClose:H})])):p("",!0)],64)}}},ut=me(Ve,[["__scopeId","data-v-f3d6acd1"]]);export{ut as default};
