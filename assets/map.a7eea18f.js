import re from"./LocationFound.635f04df.js";import ce from"./Logo.f0c8cbe1.js";import ie from"./Radar.067eb619.js";import le from"./CompassCardinalPoints.e8715c39.js";import ue from"./Compass.f794ef84.js";import de from"./Button.2b72324e.js";import fe from"./Intersect.2f787984.js";import me from"./Search.acf9471d.js";import pe from"./Menu.eeceebe2.js";import _e from"./NavigationBar.da000f42.js";import he from"./Menu.1973f3f0.js";import{bZ as V,b as $,bO as ve,c2 as ye,u as s,c3 as we,r,bM as W,i as q,bi as ge,b$ as be,c0 as Ce,bD as ke,bn as xe,l as Ie,k,h as i,w as b,bF as E,f as L,j as I,bC as Le,bT as Me,o as g,bk as F,bj as Se,c as P,b_ as T,bH as Re,bI as Be}from"./entry.6933cf32.js";import{q as Ee}from"./query.385ee946.js";import{u as Te}from"./map.9fc0fa11.js";import{P as $e,L as A}from"./permission.dd244a3c.js";import{g as Ne}from"./index.4db78ffb.js";import{_ as Oe}from"./_plugin-vue_export-helper.c27b6911.js";import"./Diamond.965aedf2.js";import"./BlurredCircle.554181f8.js";import"./tw-merge.1166cefb.js";import"./nuxt-link.70b3eb5d.js";import"./SectionHeading.cc198c64.js";import"./Cross.6c5c1d23.js";import"./utils.b826ff90.js";import"./preview.7b38c59a.js";function D(e){return ye()?(we(e),!0):!1}function N(e){return typeof e=="function"?e():s(e)}const je=typeof window<"u"&&typeof document<"u",Fe=Object.prototype.toString,Pe=e=>Fe.call(e)==="[object Object]",Ae=()=>{};function Ve(e,t=!0){V()?$(e):t?e():ve(e)}function We(e){var t;const n=N(e);return(t=n==null?void 0:n.$el)!=null?t:n}const O=je?window:void 0;function qe(...e){let t,n,l,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,l,o]=e,t=O):[t,n,l,o]=e,!t)return Ae;Array.isArray(n)||(n=[n]),Array.isArray(l)||(l=[l]);const c=[],u=()=>{c.forEach(p=>p()),c.length=0},v=(p,_,y,m)=>(p.addEventListener(_,y,m),()=>p.removeEventListener(_,y,m)),d=W(()=>[We(t),N(o)],([p,_])=>{if(u(),!p)return;const y=Pe(_)?{..._}:_;c.push(...n.flatMap(m=>l.map(C=>v(p,m,C,y))))},{immediate:!0,flush:"post"}),f=()=>{d(),u()};return D(f),f}function De(){const e=r(!1);return V()&&$(()=>{e.value=!0}),e}function He(e){const t=De();return ge(()=>(t.value,!!e()))}function ze(e,t={}){const{window:n=O}=t,l=He(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let o;const c=r(!1),u=f=>{c.value=f.matches},v=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",u):o.removeListener(u))},d=q(()=>{l.value&&(v(),o=n.matchMedia(N(e)),"addEventListener"in o?o.addEventListener("change",u):o.addListener(u),c.value=o.matches)});return D(()=>{d(),v(),o=void 0}),c}function Ue(e={}){const{window:t=O,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:l=Number.POSITIVE_INFINITY,listenOrientation:o=!0,includeScrollbar:c=!0}=e,u=r(n),v=r(l),d=()=>{t&&(c?(u.value=t.innerWidth,v.value=t.innerHeight):(u.value=t.document.documentElement.clientWidth,v.value=t.document.documentElement.clientHeight))};if(d(),Ve(d),qe("resize",d,{passive:!0}),o){const f=ze("(orientation: portrait)");W(f,()=>d())}return{width:u,height:v}}const Qe=e=>(Re("data-v-dbe35b01"),e=e(),Be(),e),Ye={key:0},Xe={class:"relative"},Ze={key:0,class:"fixed h-full w-full top-0 left-0 radar-background"},Ge={key:0,class:"fixed left-0 top-0 translate-y-[-180%] container text-center"},Je=Qe(()=>L("div",{class:"text-md text-yellow-200"}," ¡Vaya! Parece que aquí no hay nada ",-1)),Ke=[Je],et={key:0},tt={__name:"map",async setup(e){let t,n;const l=be(),{data:o}=([t,n]=Ce(()=>Me("locations",()=>Ee("location").find(),{transform:a=>Object.keys(a).map(w=>a[w])})),t=await t,n(),t),c=Te(),u=ke(),v=xe();r(null);const d=r(null),f=r(null),p=r(null),_=r(null),y=r(null),m=r(),C=r(!1),h=r(),M=r(),j=r(),H=r(0),S=r(!1),{width:R,height:nt}=Ue(),z=a=>new Promise(function(w){setTimeout(w,a)}),U=()=>{const a=_.value.getBoundingClientRect(),w=a.top+a.height/2;a.left+a.width/2;const x=d.value.getBoundingClientRect();d.value.style.top=`${w-x.height/2}px`},Q=a=>{S.value||(S.value=!0,c.value.toggleCenitalView({onComplete:()=>{S.value=!1}}))},Y=async()=>{const a=Ne.timeline();if(j.value=await $e.requestLocation(),j.value){m.value=!0,a.add("start").to(p.value,{x:-R.value},"start").to(y.value,{x:R.value},"start");const[w]=await Promise.all([A.getCurrentLocation(),z(2500)]);h.value=o.value.find(x=>A.nearbyLocation(w,x.place.coordinate)),m.value=!1,M.value=!0,h.value?(f.value.show({expanded:!1}),a.to(_.value,{y:R.value*.5})):a.add("start").to(p.value,{x:0},"start").to(y.value,{x:0},"start"),h.value?setTimeout(()=>{v.push({path:`${h.value._path}/model`})},5e3):setTimeout(()=>{M.value=!1},2e3)}},X=a=>{c.value.hide(),f.value.hide(),C.value=!0},Z=a=>{setTimeout(()=>{c.value.show()},300),f.value.show({expanded:!0,onComplete:()=>{C.value=!1}})};return q(()=>{_.value&&d.value&&U(),C.value?l.value=T.sky[900]:l.value=u.value?T.sky[900]:T.teal[500]}),$(()=>{f.value&&f.value.show({expanded:!0}),c.value&&c.value.show()}),Ie(()=>{}),(a,w)=>{const x=re,G=ce,J=ie,K=le,ee=ue,B=de,te=fe,ne=me,oe=pe,ae=_e,se=he;return g(),k(Le,null,[i(E,{name:"fade",appear:""},{default:b(()=>[s(h)?(g(),k("div",Ye,[i(x,{location:s(h)},null,8,["location"])])):I("",!0)]),_:1}),L("div",Xe,[i(G,{"enable-night-mode-change":""}),i(E,{name:"fade",appear:""},{default:b(()=>[s(m)||s(M)&&!s(h)?(g(),k("div",Ze)):I("",!0)]),_:1}),s(m)?(g(),k("div",{key:0,ref_key:"radarRef",ref:d,class:"fixed top-0 left-0 w-screen h-screen"},[i(J)],512)):I("",!0),i(ae,{ref_key:"navRef",ref:f,"inital-state":"hide",centered:""},{default:b(()=>[L("div",{ref_key:"compassButtonRef",ref:p},[i(B,{onClick:Q,class:"bg-yellow-200 h-16 w-16 relative flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[i(K,{class:"absolute w-full h-full"}),i(ee,{class:"h-8 w-8",style:F({transform:`rotate(${s(H)}deg)`})},null,8,["style"])]),_:1})],512),L("div",{ref_key:"searchButtonRef",ref:_,class:"relative"},[i(E,{name:"fade",appear:""},{default:b(()=>[s(M)&&!s(h)?(g(),k("div",Ge,Ke)):I("",!0)]),_:1}),i(B,{onClick:Y,class:Se(["bg-cyan-100 p-11",{"border-[3px] border-yellow-100 p-9":s(m)||s(h)}]),style:F({background:s(m)||s(h)?"linear-gradient(180deg, #001725 0%, rgba(0, 23, 37, 0.00) 100%)":"#EFFDFD"}),format:"circle",shadowed:""},{default:b(()=>[s(m)||s(h)?(g(),P(te,{key:0,class:"h-12 w-12"})):(g(),P(ne,{key:1,class:"h-8 w-8"}))]),_:1},8,["class","style"])],512),L("div",{ref_key:"menuButtonRef",ref:y},[i(B,{onClick:X,class:"bg-yellow-200 h-16 w-16 flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[i(oe,{class:"h-8 w-8"})]),_:1})],512)]),_:1},512)]),s(C)?(g(),k("div",et,[i(se,{onClose:Z})])):I("",!0)],64)}}},St=Oe(tt,[["__scopeId","data-v-dbe35b01"]]);export{St as default};
