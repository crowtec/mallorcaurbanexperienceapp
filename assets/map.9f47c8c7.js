import ie from"./LocationFound.e6692aa1.js";import ce from"./Logo.add8107a.js";import le from"./Radar.b1316365.js";import ue from"./CompassCardinalPoints.e1f93781.js";import de from"./Compass.a73f9d05.js";import fe from"./Button.1087b83c.js";import me from"./Intersect.9d93442e.js";import pe from"./Search.3aa685ec.js";import _e from"./Menu.ddb74214.js";import he from"./NavigationBar.94f603e1.js";import ve from"./Menu.a0a8616f.js";import{bZ as V,b as $,bO as ye,c2 as we,u as r,c3 as ge,r as i,bM as W,i as q,bi as be,b_ as Ce,c0 as ke,bD as xe,bn as Ie,l as Le,k,h as c,w as b,bG as E,f as x,j as M,bC as Me,bT as Se,o as g,bk as P,bj as Re,c as A,bH as Be,bI as Ee,b$ as T}from"./entry.d68b7fd6.js";import{q as Te}from"./query.607180f3.js";import{u as $e}from"./map.a4defb5f.js";import{P as Ne,L as F}from"./permission.dd244a3c.js";import{g as Oe}from"./index.4db78ffb.js";import{_ as je}from"./_plugin-vue_export-helper.c27b6911.js";import"./Diamond.38f033da.js";import"./BlurredCircle.6ada5e88.js";import"./tw-merge.1166cefb.js";import"./nuxt-link.b2de6700.js";import"./SectionHeading.9dbd7461.js";import"./Cross.989448b3.js";import"./utils.c527f099.js";import"./preview.9db59da0.js";function D(e){return we()?(ge(e),!0):!1}function N(e){return typeof e=="function"?e():r(e)}const Pe=typeof window<"u"&&typeof document<"u",Ae=Object.prototype.toString,Fe=e=>Ae.call(e)==="[object Object]",Ve=()=>{};function We(e,t=!0){V()?$(e):t?e():ye(e)}function qe(e){var t;const o=N(e);return(t=o==null?void 0:o.$el)!=null?t:o}const O=Pe?window:void 0;function De(...e){let t,o,l,n;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,l,n]=e,t=O):[t,o,l,n]=e,!t)return Ve;Array.isArray(o)||(o=[o]),Array.isArray(l)||(l=[l]);const a=[],u=()=>{a.forEach(p=>p()),a.length=0},v=(p,_,y,m)=>(p.addEventListener(_,y,m),()=>p.removeEventListener(_,y,m)),d=W(()=>[qe(t),N(n)],([p,_])=>{if(u(),!p)return;const y=Fe(_)?{..._}:_;a.push(...o.flatMap(m=>l.map(C=>v(p,m,C,y))))},{immediate:!0,flush:"post"}),f=()=>{d(),u()};return D(f),f}function He(){const e=i(!1);return V()&&$(()=>{e.value=!0}),e}function ze(e){const t=He();return be(()=>(t.value,!!e()))}function Ue(e,t={}){const{window:o=O}=t,l=ze(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function");let n;const a=i(!1),u=f=>{a.value=f.matches},v=()=>{n&&("removeEventListener"in n?n.removeEventListener("change",u):n.removeListener(u))},d=q(()=>{l.value&&(v(),n=o.matchMedia(N(e)),"addEventListener"in n?n.addEventListener("change",u):n.addListener(u),a.value=n.matches)});return D(()=>{d(),v(),n=void 0}),a}function Qe(e={}){const{window:t=O,initialWidth:o=Number.POSITIVE_INFINITY,initialHeight:l=Number.POSITIVE_INFINITY,listenOrientation:n=!0,includeScrollbar:a=!0}=e,u=i(o),v=i(l),d=()=>{t&&(a?(u.value=t.innerWidth,v.value=t.innerHeight):(u.value=t.document.documentElement.clientWidth,v.value=t.document.documentElement.clientHeight))};if(d(),We(d),De("resize",d,{passive:!0}),n){const f=Ue("(orientation: portrait)");W(f,()=>d())}return{width:u,height:v}}const H=e=>(Be("data-v-f3d6acd1"),e=e(),Ee(),e),Ye={key:0},Ge={class:"relative"},Xe={key:0,class:"fixed h-full w-full top-0 left-0 radar-background"},Ze=H(()=>x("div",{class:"fixed w-full top-0 h-[20vh] bg-gradient-to-b from-sky-900 to-70%"},null,-1)),Je={key:0,class:"fixed left-0 top-0 translate-y-[-180%] container text-center"},Ke=H(()=>x("div",{class:"text-md text-yellow-200"}," ¡Vaya! Parece que aquí no hay nada ",-1)),et=[Ke],tt={key:0},ot={__name:"map",async setup(e){let t,o;const l=Ce(),{data:n}=([t,o]=ke(()=>Se("locations",()=>Te("location").find(),{transform:s=>Object.keys(s).map(w=>s[w])})),t=await t,o(),t),a=$e(),u=xe(),v=Ie();i(null);const d=i(null),f=i(null),p=i(null),_=i(null),y=i(null),m=i(),C=i(!1),h=i(),I=i(),j=i(),z=i(0),S=i(!1),{width:R,height:nt}=Qe(),U=s=>new Promise(function(w){setTimeout(()=>w(),s)}),Q=()=>{const s=_.value.getBoundingClientRect(),w=s.top+s.height/2;s.left+s.width/2;const L=d.value.getBoundingClientRect();d.value.style.top=`${w-L.height/2}px`},Y=s=>{S.value||(S.value=!0,a.value.toggleCenitalView({onComplete:()=>{S.value=!1}}))},G=async()=>{const s=Oe.timeline();j.value=await Ne.requestLocation(),j.value&&(m.value=!0,s.add("start").to(p.value,{x:-R.value},"start").to(y.value,{x:R.value},"start"),Promise.all([F.getCurrentLocation(),U(4e3)]).then(([w])=>{h.value=n.value.find(L=>F.nearbyLocation(w,L.place.coordinate)),m.value=!1,I.value=!0,h.value?(f.value.show({expanded:!1}),s.to(_.value,{y:R.value*.5})):s.add("start").to(p.value,{x:0},"start").to(y.value,{x:0},"start"),h.value?setTimeout(()=>{v.push({path:`${h.value._path}/model`})},5e3):setTimeout(()=>{I.value=!1},2e3)}))},X=s=>{a.value.hide(),f.value.hide(),C.value=!0},Z=s=>{setTimeout(()=>{a.value.show()},300),f.value.show({expanded:!0,onComplete:()=>{C.value=!1}})};return q(()=>{_.value&&d.value&&Q(),C.value||m.value||I.value?l.value=T.sky[900]:l.value=u.value?T.teal[700]:T.teal[500]}),$(()=>{f.value&&f.value.show({expanded:!0}),a.value&&(a.value.show(),a.value.showLocations())}),Le(()=>{a.value&&a.value.hideLocations()}),(s,w)=>{const L=ie,J=ce,K=le,ee=ue,te=de,B=fe,oe=me,ne=pe,ae=_e,se=he,re=ve;return g(),k(Me,null,[c(E,{name:"fade",appear:""},{default:b(()=>[r(h)?(g(),k("div",Ye,[c(L,{location:r(h)},null,8,["location"])])):M("",!0)]),_:1}),x("div",Ge,[c(J,{"enable-night-mode-change":""}),c(E,{name:"fade",appear:""},{default:b(()=>[r(m)||r(I)&&!r(h)?(g(),k("div",Xe)):M("",!0)]),_:1}),r(m)?(g(),k("div",{key:0,ref_key:"radarRef",ref:d,class:"fixed top-0 left-0 w-screen h-screen"},[c(K),Ze],512)):M("",!0),c(se,{ref_key:"navRef",ref:f,"inital-state":"hide",centered:""},{default:b(()=>[x("div",{ref_key:"compassButtonRef",ref:p},[c(B,{onClick:Y,class:"bg-yellow-200 h-16 w-16 relative flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[c(ee,{class:"absolute w-full h-full"}),c(te,{class:"h-8 w-8",style:P({transform:`rotate(${r(z)}deg)`})},null,8,["style"])]),_:1})],512),x("div",{ref_key:"searchButtonRef",ref:_,class:"relative"},[c(E,{name:"fade",appear:""},{default:b(()=>[r(I)&&!r(h)?(g(),k("div",Je,et)):M("",!0)]),_:1}),c(B,{onClick:G,class:Re(["bg-cyan-100 p-11",{"border-[3px] border-yellow-100 p-9":r(m)||r(h)}]),style:P({background:r(m)||r(h)?"linear-gradient(180deg, #001725 0%, rgba(0, 23, 37, 0.00) 100%)":"#EFFDFD"}),format:"circle",shadowed:""},{default:b(()=>[r(m)||r(h)?(g(),A(oe,{key:0,class:"h-12 w-12"})):(g(),A(ne,{key:1,class:"h-8 w-8"}))]),_:1},8,["class","style"])],512),x("div",{ref_key:"menuButtonRef",ref:y},[c(B,{onClick:X,class:"bg-yellow-200 h-16 w-16 flex justify-center items-center",format:"circle",shadowed:""},{default:b(()=>[c(ae,{class:"h-8 w-8"})]),_:1})],512)]),_:1},512)]),r(C)?(g(),k("div",tt,[c(re,{onClose:Z})])):M("",!0)],64)}}},Rt=je(ot,[["__scopeId","data-v-f3d6acd1"]]);export{Rt as default};
