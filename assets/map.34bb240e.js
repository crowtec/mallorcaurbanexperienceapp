import se from"./LocationFound.51d35226.js";import re from"./Logo.e57f4faa.js";import ce from"./Radar.23fcbcd3.js";import ie from"./CompassCardinalPoints.655b6273.js";import le from"./Compass.f0854124.js";import ue from"./Button.0b4b96dc.js";import de from"./Intersect.5532c66e.js";import me from"./Search.f4c62c93.js";import fe from"./Menu.4c3950a0.js";import pe from"./NavigationBar.a021108e.js";import _e from"./Menu.392f604c.js";import{x as V,j as N,y as ve,z as he,h as s,A as ye,r,B as W,C as q,D as we,i as ge,l as xe,E as Ce,g as ke,G as Ie,c as C,b as i,w as x,T as B,a as b,H as I,F as be,q as Le,o as g,I as O,n as Se,v as P,f as E,p as Me,e as Re}from"./entry.1d340eb5.js";import{q as Be}from"./query.670004fe.js";import{u as Ee}from"./map.b5a4f168.js";import{P as Ne,L as j}from"./permission.bb5e6f28.js";import{g as Te}from"./index.4db78ffb.js";import{_ as Ae}from"./_plugin-vue_export-helper.c27b6911.js";import"./Diamond.0f9148f7.js";import"./nuxt-link.50fb021c.js";import"./tw-merge.1166cefb.js";import"./SectionHeading.02088e26.js";import"./Cross.f3acddb8.js";import"./utils.091fcea0.js";import"./preview.1cd11110.js";function D(e){return he()?(ye(e),!0):!1}function T(e){return typeof e=="function"?e():s(e)}const Fe=typeof window<"u"&&typeof document<"u",Oe=Object.prototype.toString,Pe=e=>Oe.call(e)==="[object Object]",je=()=>{};function Ve(e,t=!0){V()?N(e):t?e():ve(e)}function We(e){var t;const n=T(e);return(t=n==null?void 0:n.$el)!=null?t:n}const A=Fe?window:void 0;function qe(...e){let t,n,l,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,l,o]=e,t=A):[t,n,l,o]=e,!t)return je;Array.isArray(n)||(n=[n]),Array.isArray(l)||(l=[l]);const u=[],d=()=>{u.forEach(f=>f()),u.length=0},m=(f,h,p,y)=>(f.addEventListener(h,p,y),()=>f.removeEventListener(h,p,y)),c=W(()=>[We(t),T(o)],([f,h])=>{if(d(),!f)return;const p=Pe(h)?{...h}:h;u.push(...n.flatMap(y=>l.map(_=>m(f,y,_,p))))},{immediate:!0,flush:"post"}),v=()=>{c(),d()};return D(v),v}function De(){const e=r(!1);return V()&&N(()=>{e.value=!0}),e}function ze(e){const t=De();return we(()=>(t.value,!!e()))}function He(e,t={}){const{window:n=A}=t,l=ze(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let o;const u=r(!1),d=v=>{u.value=v.matches},m=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",d):o.removeListener(d))},c=q(()=>{l.value&&(m(),o=n.matchMedia(T(e)),"addEventListener"in o?o.addEventListener("change",d):o.addListener(d),u.value=o.matches)});return D(()=>{c(),m(),o=void 0}),u}function $e(e={}){const{window:t=A,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:l=Number.POSITIVE_INFINITY,listenOrientation:o=!0,includeScrollbar:u=!0}=e,d=r(n),m=r(l),c=()=>{t&&(u?(d.value=t.innerWidth,m.value=t.innerHeight):(d.value=t.document.documentElement.clientWidth,m.value=t.document.documentElement.clientHeight))};if(c(),Ve(c),qe("resize",c,{passive:!0}),o){const v=He("(orientation: portrait)");W(v,()=>c())}return{width:d,height:m}}const Ue=e=>(Me("data-v-c21a98cc"),e=e(),Re(),e),Qe={key:0},Ye={class:"relative"},Ge={key:0,class:"fixed h-full w-full top-0 left-0 radar-background"},Xe={key:0,class:"fixed left-0 top-0 translate-y-[-180%] container text-center"},Je=Ue(()=>b("div",{class:"text-md text-yellow-200"}," ¡Vaya! Parece que aquí no hay nada ",-1)),Ke=[Je],Ze={key:0},et={__name:"map",async setup(e){let t,n;const l=ge(),{data:o}=([t,n]=xe(()=>Le("locations",()=>Be("location").find(),{transform:a=>Object.keys(a).map(w=>a[w])})),t=await t,n(),t),u=Ee(),d=Ce();ke(),r(null);const m=r(null),c=r(null),v=r(null),f=r(null),h=r(null),p=r(),y=r(!1),_=r(),L=r(),F=r(),z=r(0),S=r(!1),{width:M,height:tt}=$e(),H=a=>new Promise(function(w){setTimeout(w,a)}),$=()=>{const a=f.value.getBoundingClientRect(),w=a.top+a.height/2;a.left+a.width/2;const k=m.value.getBoundingClientRect();m.value.style.top=`${w-k.height/2}px`},U=a=>{S.value||(S.value=!0,u.value.toggleCenitalView({onComplete:()=>{S.value=!1}}))},Q=async()=>{const a=Te.timeline();if(F.value=await Ne.requestLocation(),a.add("start").to(v.value,{x:-M.value},"start").to(h.value,{x:M.value},"start"),F.value){p.value=!0;const[w]=await Promise.all([j.getCurrentLocation(),H(2500)]);_.value=o.value.find(k=>j.nearbyLocation(w,k.place.coordinate)),p.value=!1,L.value=!0,_.value?(c.value.show({expanded:!1}),a.to(f.value,{y:M.value*.5})):a.add("start").to(v.value,{x:0},"start").to(h.value,{x:0},"start"),_.value?setTimeout(()=>{},5e3):setTimeout(()=>{L.value=!1},2e3)}},Y=a=>{c.value.hide(),y.value=!0},G=a=>{c.value.show({expanded:!0,onComplete:()=>{y.value=!1}})};return q(()=>{f.value&&m.value&&$(),y.value?l.value=E.sky[900]:l.value=d.value?E.sky[900]:E.teal[500]}),N(()=>{c.value&&c.value.show({expanded:!0}),u.value&&u.value.show()}),Ie(()=>{}),(a,w)=>{const k=se,X=re,J=ce,K=ie,Z=le,R=ue,ee=de,te=me,ne=fe,oe=pe,ae=_e;return g(),C(be,null,[i(B,{name:"fade",appear:""},{default:x(()=>[s(_)?(g(),C("div",Qe,[i(k,{location:s(_)},null,8,["location"])])):I("",!0)]),_:1}),b("div",Ye,[i(X),i(B,{name:"fade",appear:""},{default:x(()=>[s(p)||s(L)&&!s(_)?(g(),C("div",Ge)):I("",!0)]),_:1}),s(p)?(g(),C("div",{key:0,ref_key:"radarRef",ref:m,class:"fixed top-0 left-0 w-screen h-screen"},[i(J)],512)):I("",!0),i(oe,{ref_key:"navRef",ref:c,"inital-state":"hide",centered:""},{default:x(()=>[b("div",{ref_key:"compassButtonRef",ref:v},[i(R,{onClick:U,class:"bg-yellow-200 h-16 w-16 relative flex justify-center items-center",format:"circle",shadowed:""},{default:x(()=>[i(K,{class:"absolute w-full h-full"}),i(Z,{class:"h-8 w-8",style:O({transform:`rotate(${s(z)}deg)`})},null,8,["style"])]),_:1})],512),b("div",{ref_key:"searchButtonRef",ref:f,class:"relative"},[i(B,{name:"fade",appear:""},{default:x(()=>[s(L)&&!s(_)?(g(),C("div",Xe,Ke)):I("",!0)]),_:1}),i(R,{onClick:Q,class:Se(["bg-cyan-100 p-11",{"border-[3px] border-yellow-100 p-9":s(p)||s(_)}]),style:O({background:s(p)||s(_)?"linear-gradient(180deg, #001725 0%, rgba(0, 23, 37, 0.00) 100%)":"#EFFDFD"}),format:"circle",shadowed:""},{default:x(()=>[s(p)||s(_)?(g(),P(ee,{key:0,class:"h-12 w-12"})):(g(),P(te,{key:1,class:"h-8 w-8"}))]),_:1},8,["class","style"])],512),b("div",{ref_key:"menuButtonRef",ref:h},[i(R,{onClick:Y,class:"bg-yellow-200 h-16 w-16 flex justify-center items-center",format:"circle",shadowed:""},{default:x(()=>[i(ne,{class:"h-8 w-8"})]),_:1})],512)]),_:1},512)]),s(y)?(g(),C("div",Ze,[i(ae,{onClose:G})])):I("",!0)],64)}}},Lt=Ae(et,[["__scopeId","data-v-c21a98cc"]]);export{Lt as default};
