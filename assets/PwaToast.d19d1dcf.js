import j from"./Button.409fc7c7.js";import T from"./Cross.29bba4db.js";import{A as V,y as E,bK as H,r as v,g as F,u as t,o as a,c as s,a as n,F as d,b as l,w as u,d as h,q as x,bD as P}from"./entry.df04a53e.js";import{d as U,a as G,M as K,B as W}from"./device.28d42929.js";import{u as M}from"./index.876757e2.js";import"./nuxt-link.c0932417.js";import"./tw-merge.1166cefb.js";function $(_,e,o){const i=_.getTime(),r=e.getTime();return Math.abs(r-i)/(1e3*60)>=o}const J={key:0,class:"fixed w-full top-0 left-0 px-5 py-6"},L={class:"relative w-full bg-blue-900/90 px-5 py-6 rounded-2xl border-2 boder-green-100"},Q={class:"flex items-center justify-between gap-6 w-full"},X=n("div",{class:"text-green-100 text-xs"}," Para una mejor experiencia instala la app en tu dispositivo. ",-1),Y={key:0,class:"flex flex-col gap-6 px-6 pt-16 pb-6"},Z=P('<div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">01</div><div class="text-green-100"> Haz click en el icono de &quot;Compartir&quot; del navegador. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">02</div><div class="text-green-100"> Selecciona la opción &quot;Añadir a pantalla de inicio&quot;. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">03</div><div class="text-green-100"> Confirma la instalación pulsando el botón de &quot;Añadir&quot;. </div></div>',3),ee={key:1,class:"flex gap-6"},te=n("div",{class:"slashed-zero text-green-100 text-2xl"},"01",-1),ae=n("div",{class:"text-green-100"}," Abre la web desde Safari para instalar la aplicación en iOS. ",-1),se=[te,ae],le=P('<div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">01</div><div class="text-green-100"> Haz click en el icono de &quot;Menú&quot; del navegador. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">02</div><div class="text-green-100"> Selecciona la opción &quot;Instalar&quot; o &quot;Instalar aplicación&quot;. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">03</div><div class="text-green-100"> Confirma la instalación pulsando el botón de &quot;Instalar&quot;. </div></div>',3),ne={class:"flex items-center justify-between gap-6 w-full"},oe=n("div",{class:"text-green-100 text-xs"}," Para una mejor experiencia instala la app en tu dispositivo. ",-1),ie={class:"flex items-center justify-between gap-6 w-full"},re=n("div",{class:"text-green-100 text-xs"}," Hay una nueva versión de la aplicación, pulsa el botón para actualizarla. ",-1),me={__name:"PwaToast",setup(_){const{$pwa:e}=V();E(),H();const o=M("pwa-installation-cancelled",!1,localStorage),i=M("pwa-installation-cancelled-date",void 0,localStorage),r=v(),f=v(!1),g=v(),b=v(),z=async()=>{e.install()},B=()=>{e.updateServiceWorker()},O=()=>{f.value=!f.value},R=()=>{e.cancelInstall(),o.value=!0,i.value=new Date},A=()=>{e.cancelPrompt(),o.value=!0,i.value=new Date},N=()=>{o.value=!0,i.value=new Date};return F(()=>{g.value=U(),b.value=G(),r.value=typeof BeforeInstallPromptEvent<"u",i.value&&$(new Date(i.value),new Date,5)&&(console.log("resetShowInstallPrompt"),console.log(e),o.value=!1,localStorage.removeItem("vite-pwa:hide-install"),r&&!(e!=null&&e.showInstallPrompt)&&(e.showInstallPrompt=!0))}),(p,ce)=>{var w,I,y,k,C,S,q,D;const c=j,m=T;return!t(e).isInstalled&&!t(o)&&(!t(r)||(w=t(e))!=null&&w.needRefresh||(I=t(e))!=null&&I.showInstallPrompt&&!((y=t(e))!=null&&y.offlineReady)&&!((k=t(e))!=null&&k.needRefresh))?(a(),s("div",J,[n("div",L,[t(r)?x("",!0):(a(),s(d,{key:0},[n("div",Q,[X,l(c,{class:"bg-green-100 px-6 py-2 text-xs",onClick:O,format:"rounded"},{default:u(()=>[h("Instrucciones")]),_:1})]),t(f)?(a(),s("div",Y,[t(g)===("MobileOS"in p?p.MobileOS:t(K)).iOS?(a(),s(d,{key:0},[t(b)===("Browsers"in p?p.Browsers:t(W)).Safari?(a(),s(d,{key:0},[Z],64)):(a(),s("div",ee,se))],64)):(a(),s(d,{key:1},[le],64))])):x("",!0),l(c,{class:"absolute bg-green-100 border-2 border-green-100 absolute p-1 text-xs top-0 right-0 -translate-y-1/3 translate-x-1/3",format:"rounded",onClick:N},{default:u(()=>[l(m,{class:"text-green-100 h-2.5 w-2.5"})]),_:1})],64)),t(r)&&((C=t(e))!=null&&C.showInstallPrompt)&&!((S=t(e))!=null&&S.offlineReady)&&!((q=t(e))!=null&&q.needRefresh)?(a(),s(d,{key:1},[n("div",ne,[oe,l(c,{class:"bg-green-100 px-6 py-2 text-xs",onClick:z,format:"rounded"},{default:u(()=>[h("Instalar")]),_:1})]),l(c,{class:"absolute bg-green-100 border-2 border-green-100 absolute p-1 text-xs top-0 right-0 -translate-y-1/3 translate-x-1/3",onClick:R,format:"rounded"},{default:u(()=>[l(m,{class:"text-green-100 h-2.5 w-2.5"})]),_:1})],64)):x("",!0),(D=t(e))!=null&&D.needRefresh?(a(),s(d,{key:2},[n("div",ie,[re,l(c,{class:"bg-green-100 px-6 py-2 text-xs",onClick:B,format:"rounded"},{default:u(()=>[h("Actualizar")]),_:1})]),l(c,{class:"absolute bg-green-100 border-2 border-green-100 absolute p-1 text-xs top-0 right-0 -translate-y-1/3 translate-x-1/3",onClick:A,format:"rounded"},{default:u(()=>[l(m,{class:"text-green-100 h-2.5 w-2.5"})]),_:1})],64)):x("",!0)])])):x("",!0)}}};export{me as default};
