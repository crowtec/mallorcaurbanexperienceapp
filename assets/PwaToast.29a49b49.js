import E from"./Button.5314088f.js";import H from"./Cross.1ecac754.js";import{bq as $,bo as G,bK as O,r as x,b as U,u as e,o as a,l as s,f as n,bD as d,h as l,w as u,bG as _,j as p,bC as R}from"./entry.e0b45919.js";import{a as F,d as K,B as W}from"./device.fe62fe19.js";import{u as P}from"./index.545a2197.js";import"./nuxt-link.f628faf4.js";import"./tw-merge.1166cefb.js";function J(b,t,f){const v=b.getTime(),o=t.getTime();return Math.abs(o-v)/(1e3*60)>=f}const L={key:0,class:"fixed w-full top-0 left-0 px-5 py-6"},Q={class:"relative w-full bg-blue-900/90 px-5 py-6 rounded-2xl border-2 boder-green-100"},X={class:"flex items-center justify-between gap-6 w-full"},Y=n("div",{class:"text-green-100 text-xs"}," Para una mejor experiencia instala la app en tu dispositivo. ",-1),Z={key:0,class:"flex flex-col gap-6 px-6 pt-16 pb-6"},ee=R('<div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">01</div><div class="text-green-100"> Haz click en el icono de &quot;Compartir&quot; del navegador. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">02</div><div class="text-green-100"> Selecciona la opción &quot;Añadir a pantalla de inicio&quot;. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">03</div><div class="text-green-100"> Confirma la instalación pulsando el botón de &quot;Añadir&quot;. </div></div>',3),te={key:1,class:"flex gap-6"},ae=n("div",{class:"slashed-zero text-green-100 text-2xl"},"01",-1),se=n("div",{class:"text-green-100"}," Abre la web desde Safari para instalar la aplicación en iOS. ",-1),le=[ae,se],ne=R('<div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">01</div><div class="text-green-100"> Haz click en el icono de &quot;Menú&quot; del navegador. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">02</div><div class="text-green-100"> Selecciona la opción &quot;Instalar&quot; o &quot;Instalar aplicación&quot;. </div></div><div class="flex gap-6"><div class="slashed-zero text-green-100 text-2xl">03</div><div class="text-green-100"> Confirma la instalación pulsando el botón de &quot;Instalar&quot;. </div></div>',3),oe={class:"flex items-center justify-between gap-6 w-full"},re=n("div",{class:"text-green-100 text-xs"}," Para una mejor experiencia instala la app en tu dispositivo. ",-1),ie={class:"flex items-center justify-between gap-6 w-full"},ce=n("div",{class:"text-green-100 text-xs"}," Hay una nueva versión de la aplicación, pulsa el botón para actualizarla. ",-1),he={__name:"PwaToast",setup(b){const{$pwa:t}=$(),f=G(),v=O(),o=P("pwa-installation-cancelled",!1,localStorage),r=P("pwa-installation-cancelled-date",void 0,localStorage),i=x(),g=x(!1),w=x(!1),I=x(),M=async()=>{t.install()},j=()=>{t.updateServiceWorker()},N=()=>{g.value=!g.value},A=()=>{t.cancelInstall(),o.value=!0,r.value=new Date},T=()=>{t.cancelPrompt(),o.value=!0,r.value=new Date},V=()=>{o.value=!0,r.value=new Date};return U(()=>{w.value=F(),I.value=K(),i.value=typeof BeforeInstallPromptEvent<"u",r.value&&J(new Date(r.value),new Date,5)&&(console.log("resetShowInstallPrompt"),localStorage.removeItem("vite-pwa:hide-install"),o.value=!1,i.value&&f.push({path:v.path}))}),(m,de)=>{var k,y,C,q,S,D,z,B;const c=E,h=H;return!e(t).isInstalled&&!e(o)&&(!e(i)||(k=e(t))!=null&&k.needRefresh||(y=e(t))!=null&&y.showInstallPrompt&&!((C=e(t))!=null&&C.offlineReady)&&!((q=e(t))!=null&&q.needRefresh))?(a(),s("div",L,[n("div",Q,[e(i)?p("",!0):(a(),s(d,{key:0},[n("div",X,[Y,l(c,{class:"bg-green-100 px-6 py-2 text-xs",onClick:N,format:"rounded"},{default:u(()=>[_("Instrucciones")]),_:1})]),e(g)?(a(),s("div",Z,[e(w)?(a(),s(d,{key:0},[e(I)===("Browsers"in m?m.Browsers:e(W)).Safari?(a(),s(d,{key:0},[ee],64)):(a(),s("div",te,le))],64)):(a(),s(d,{key:1},[ne],64))])):p("",!0),l(c,{class:"absolute bg-green-100 border-2 border-green-100 absolute p-1 text-xs top-0 right-0 -translate-y-1/3 translate-x-1/3",format:"rounded",onClick:V},{default:u(()=>[l(h,{class:"text-green-100 h-2.5 w-2.5"})]),_:1})],64)),e(i)&&((S=e(t))!=null&&S.showInstallPrompt)&&!((D=e(t))!=null&&D.offlineReady)&&!((z=e(t))!=null&&z.needRefresh)?(a(),s(d,{key:1},[n("div",oe,[re,l(c,{class:"bg-green-100 px-6 py-2 text-xs",onClick:M,format:"rounded"},{default:u(()=>[_("Instalar")]),_:1})]),l(c,{class:"absolute bg-green-100 border-2 border-green-100 absolute p-1 text-xs top-0 right-0 -translate-y-1/3 translate-x-1/3",onClick:A,format:"rounded"},{default:u(()=>[l(h,{class:"text-green-100 h-2.5 w-2.5"})]),_:1})],64)):p("",!0),(B=e(t))!=null&&B.needRefresh?(a(),s(d,{key:2},[n("div",ie,[ce,l(c,{class:"bg-green-100 px-6 py-2 text-xs",onClick:j,format:"rounded"},{default:u(()=>[_("Actualizar")]),_:1})]),l(c,{class:"absolute bg-green-100 border-2 border-green-100 absolute p-1 text-xs top-0 right-0 -translate-y-1/3 translate-x-1/3",onClick:T,format:"rounded"},{default:u(()=>[l(h,{class:"text-green-100 h-2.5 w-2.5"})]),_:1})],64)):p("",!0)])])):p("",!0)}}};export{he as default};
