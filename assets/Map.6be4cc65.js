import O from"./NightLights.2e409aeb.js";import P from"./DayLights.d2dd3f37.js";import T from"./MapEntity.dd2012b4.js";import{_ as $}from"./client-only.d3ef2eae.js";import{l as D,x as E,u as U,r as i,g as H,bE as W,bF as G,j as Q,h as x,o as n,c as s,b as a,w,m as M,T as q,a as u,n as J,p as c,F as l,bG as K,i as X,bH as Y,bI as Z}from"./entry.ccd82dae.js";import{u as ee}from"./locations.04106c76.js";import{g as S}from"./index.4db78ffb.js";import"./Light.e986e8d5.js";import"./index.b485ba4b.js";const oe=""+new URL("pin_empty.3089d126.glb",import.meta.url).href,te=""+new URL("pin_filled.09e8dc87.glb",import.meta.url).href;const _=r=>(Y("data-v-55c7e4fd"),r=r(),Z(),r),ne={key:0,class:"map__placeholder fixed top-0 left-0 h-full w-full"},ae=_(()=>u("div",{class:"fixed w-full top-0 h-[30vh] bg-gradient-to-b from-teal-700 to-70% pointer-events-none"},null,-1)),se=_(()=>u("div",{class:"fixed w-full bottom-0 h-[30vh] bg-gradient-to-t from-teal-700 to-70%"},null,-1)),ie=_(()=>u("div",{class:"fixed w-full top-0 h-[30vh] bg-gradient-to-b from-teal-500 to-70% pointer-events-none"},null,-1)),le=_(()=>u("div",{class:"fixed w-full bottom-0 h-[30vh] bg-gradient-to-b from-teal-500 to-70% rotate-180"},null,-1)),ce={__name:"Map",props:{locations:{type:Array,default:[]}},setup(r,{expose:j}){const V=E(),F=ee(),f=U(),d=i(!1),v=i(!1),p=i(!0),b=i(!1),C=i(!1),L=i(!1),g=i(!0),I={target:"0 -1.7 -0.5",initialPosition:"0 20 0",rotateSpeed:"0.5",enablePan:"false",minPolarAngle:"0",maxPolarAngle:"70",minDistance:"10",maxDistance:"30",zoomSpeed:"0.4",dampingFactor:"0.1",enabled:"true",enableDamping:"true"};j({show:()=>p.value=!0,hide:()=>p.value=!1,toggleCenitalView:({onComplete:e=()=>{}}={})=>{if(v.value=!v.value,d.value){const o=S.timeline(),t=d.value.components["orbit-controls"],m=t.controls.object;v.value?o.to(m.position,{x:0,y:20,z:0,onComplete:()=>{t.controls.enabled=!1,e&&e()}}):(t.controls.enabled=!0,o.to(m.position,{x:0,y:10,z:16,onComplete:()=>{e&&e()}}))}},showLocations:()=>b.value=!0,hideLocations:()=>b.value=!1}),H(()=>{W(()=>{const e=S.timeline();if(d.value){const o=d.value.components["orbit-controls"],t=o.controls.object;o.controls.enabled=!0,e.to(t.position,{x:0,y:10,z:16})}})}),G(()=>{var o,t;const e=(o=document.getElementsByTagName("html"))==null?void 0:o[0];(t=e==null?void 0:e.classList)==null||t.remove("a-fullscreen")}),Q(()=>{L.value&&C.value&&(g.value=!1)});const N=e=>{V.push({path:e})};return(e,o)=>{const t=x("a-sky"),m=O,R=P,z=T,k=x("a-entity"),A=x("a-scene"),B=$;return n(),s(l,null,[a(q,{name:"fade",appear:""},{default:w(()=>[g.value?(n(),s("div",ne)):M("",!0)]),_:1}),a(B,null,{default:w(()=>[u("div",{class:J(["transition-opacity duration-[1500ms]",g.value?"opacity-0 invisible":"opacity-100 visible"])},[a(A,{ref:"sceneRef",visible:p.value,shadow:"type: pcf",fog:c(f)?"type: exponential; color: #1A1C25; density: 0.030;":"type: exponential; color: #047C87; density: 0.020;","device-orientation-permission-ui":"enabled: false",renderer:`antialias: true;
                    colorManagement: true;
                    sortObjects: false;
                    physicallyCorrectLights: true;
                    maxCanvasWidth: 1920;
                    maxCanvasHeight: 1920;`,cursor:"rayOrigin: mouse",raycaster:"objects: .location",onLoaded:o[1]||(o[1]=()=>L.value=!0)},{default:w(()=>[c(f)?(n(),s(l,{key:0},[a(t,{color:"#1A1C25"}),a(m)],64)):(n(),s(l,{key:1},[a(t,{color:"#047C87"}),a(R)],64)),a(z,{onModelLoaded:o[0]||(o[0]=()=>C.value=!0)}),(n(!0),s(l,null,K(r.locations,(h,y)=>(n(),X(k,{key:y,id:`location-${y}`,"gltf-model":c(F).includes(h._id)?c(te):c(oe),position:h.place.position,visible:b.value,class:"location","animation-mixer":"",animation:`property: scale; to: 0.24 0.24 0.24; dur: 1000; easing: easeInQuad; loop: true; dir:alternate; delay: ${y*100}`,rotation:"0 0 0",scale:"0.2 0.2 0.2",onClick:_e=>N(h._path)},null,8,["id","gltf-model","position","visible","animation","onClick"]))),128)),a(k,{ref_key:"cameraRef",ref:d,id:"camera",camera:"","look-controls":"enabled:false","orbit-controls":I},null,512)]),_:1},8,["visible","fog"])],2)]),_:1}),p.value?(n(),s(l,{key:0},[c(f)?(n(),s(l,{key:0},[ae,se],64)):(n(),s(l,{key:1},[ie,le],64))],64)):M("",!0)],64)}}},Le=D(ce,[["__scopeId","data-v-55c7e4fd"]]);export{Le as default};
